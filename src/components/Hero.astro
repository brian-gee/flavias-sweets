---
import { fetchIndividualPost } from '../utils/instagram.js';

interface Post {
  media_type: string;
  permalink: string;
  caption?: string;
  thumbnail_url?: string;
  media_url: string;
}

const post: Post = await fetchIndividualPost();
---

<div class="w-full mx-auto text-left md:w-11/12 grid grid-cols-2">
  <div>
    <h1
      class="mb-8 text-4xl font-extrabold leading-none tracking-normal md:text-6xl md:tracking-tight">
      <span class="text-pink-400">Cherished Confections</span>
    </h1>
    <p class="mb-8 text-lg text-gray-600 md:text-xl">
      Celebrate with our deliciously crafted sweets, perfect for creating
      memories that last a lifetime. Uncover the secret to unforgettable
      parties!
    </p>
    <div class="mb-4 space-x-0 md:space-x-2 md:mb-8">
      <a
        href="/contact"
        class="inline-flex items-center justify-center w-full px-6 py-3 mb-2 text-lg text-white bg-pink-400 hover:bg-pink-500 rounded-2xl sm:w-auto sm:mb-0">
        Get Started
      </a>
      <a
        href=""
        class="inline-flex items-center justify-center w-full px-6 py-3 mb-2 text-lg bg-gray-200 hover:bg-gray-300 rounded-2xl sm:w-auto sm:mb-0">
        Learn More
      </a>
    </div>
  </div>
  <div>
    <a
      href={post.permalink}
      target="_blank"
      rel="noopener noreferrer"
      class="w-full h-auto relative">
      {
        post.media_type === 'VIDEO' ? (
          <video
            width="100%"
            height="auto"
            src={post.media_url}
            class="absolute inset-0 w-full h-auto object-cover"
            controls
            preload="metadata"
            poster={post.thumbnail_url || post.media_url}
            style="object-fit: cover;"
          />
        ) : (
          <img
            width="100%"
            height="auto"
            src={post.media_url}
            alt={
              post.caption ? post.caption.substring(0, 100) : 'Instagram Post'
            }
            class="absolute inset-0 w-full h-auto object-cover"
          />
        )
      }
    </a>
  </div>
</div>
